<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>動態Kiss Cam拉霸機</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-container">
        <button class="reset-button" id="resetButton" onclick="resetGame()">🔄 重設</button>
        
        <h1 class="title" id="gameTitle">🎰 載入中... 💕</h1>
        
        <div class="config-section" id="configSection">
            <div class="config-status" id="configStatus">
                <h3 style="color: #831843; margin-bottom: 20px; font-size: 1.8rem;">正在載入設定檔案...</h3>
                <div class="loading-spinner">⏳</div>
            </div>
            
            <div class="config-preview" id="configPreview" style="display: none;">
                <h3 style="color: #831843; margin-bottom: 20px; font-size: 1.8rem;">設定檔案載入成功！</h3>
                <div class="preview-grid" id="previewGrid"></div>
                <div style="margin: 20px 0; color: #831843; font-size: 1.2rem;">
                    <div> <span id="titlePreview"></span></div>
                    <div>動作數量: <span id="countPreview"></span> 個</div>
                </div>
                <button class="start-game-btn" id="startGameBtn" onclick="startGame()">開始遊戲</button>
            </div>
            
            <div class="config-error" id="configError" style="display: none;">
                <h3 style="color: #dc2626; margin-bottom: 20px; font-size: 1.8rem;">⚠️ 設定檔案載入失敗</h3>
                <p style="color: #7f1d1d; margin-bottom: 20px;">請確認同目錄下有 config.txt 檔案</p>
                <div style="background: #fef2f2; padding: 20px; border-radius: 10px; text-align: left; color: #7f1d1d; font-size: 0.9rem;">
                    <strong>config.txt 格式範例：</strong><br>
                    title=🎰 婚禮Kiss Cam拉霸機 💕<br>
                    action1=親吻 💋,kiss.jpg<br>
                    action2=擁抱 🤗,hug.jpg<br>
                    action3=跳舞 💃,dance.jpg<br>
                    action4=比心 🥰,heart.jpg<br>
                    action5=飛吻 😘,blow_kiss.jpg
                </div>
                <button class="start-game-btn" onclick="loadConfig()" style="background: #dc2626;">重新載入設定</button>
            </div>
        </div>

        <div class="game-section" id="gameSection" style="display: none;">
            <div class="action-count">
                剩餘動作: <span id="remainingCount">0</span> 個 | 已抽取: <span id="actionCount">0</span> 次
            </div>

            <div class="slot-machine">
                <div class="slot-reel">
                    <div class="slot-window"></div>
                    <div class="reel-strip" id="reel1"></div>
                </div>
                <div class="slot-reel">
                    <div class="slot-window"></div>
                    <div class="reel-strip" id="reel2"></div>
                </div>
                <div class="slot-reel">
                    <div class="slot-window"></div>
                    <div class="reel-strip" id="reel3"></div>
                </div>
            </div>

            <div class="selected-action" id="selectedAction">
                準備好展現甜蜜時刻了嗎？💕
            </div>

            <button class="spin-button" id="spinButton" onclick="spinSlots()">
                🎰 拉霸開始！
            </button>

            <button class="spin-button" id="nextButton" onclick="spinSlots()" style="display: none; background: linear-gradient(135deg, #f472b6, #ec4899);">
                💖 下一個甜蜜動作
            </button>
        </div>
    </div>

    <!-- 滿版顯示覆蓋層 -->
    <div class="fullscreen-overlay" id="fullscreenOverlay">
        <button class="close-fullscreen" onclick="closeFullscreen()">✕</button>
        <div class="fullscreen-content">
            <img class="fullscreen-image" id="fullscreenImage" src="" alt="">
            <div class="fullscreen-title" id="fullscreenTitle">動作名稱</div>
        </div>
    </div>

    <script src="main.js"></script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97c3e4c5a341826d',t:'MTc1NzM5MTYzMi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
